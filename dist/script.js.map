{"version":3,"file":"script.js","sources":["../src/script.ts"],"sourcesContent":["// only import types - no external code\nimport type {\n  ExplicitAnyType,\n  InterfaceDataElementKeyType,\n  SovConsumerType,\n  SovConversionsType,\n  SovendusPageConfig,\n  SovendusThankYouPageConfig,\n  SovendusThankYouPageStatus,\n  SovPageStatus,\n  Versions,\n} from \"sovendus-integration-types\";\n\nimport type { CookieSetOptions, CookieStorageObject } from \"./types\";\n\nconst PLUGIN_VERSION = \"gtm-new-1.0.0\";\n\ndeclare const data: {\n  // IMPORTANT: Sync this with the tags input settings keys\n  pageType: \"page\" | \"thankyou\";\n  // page settings\n  voucherNetworkPage: boolean | undefined;\n  optimizePage: boolean | undefined;\n  optimizeIdPage: ExplicitAnyType;\n  checkoutProductsPage: boolean | undefined;\n  // thankyou settings\n  voucherNetwork: boolean | undefined;\n  checkoutBenefits: boolean | undefined;\n  checkoutProducts: boolean | undefined;\n  optimize: boolean | undefined;\n  optimizeId: ExplicitAnyType;\n  trafficSourceNumber: ExplicitAnyType;\n  trafficMediumNumber: ExplicitAnyType;\n  orderId: ExplicitAnyType;\n  netOrderValue: ExplicitAnyType;\n  grossOrderValue: ExplicitAnyType;\n  shippingValue: ExplicitAnyType;\n  taxValue: ExplicitAnyType;\n  orderCurrency: ExplicitAnyType;\n  usedCouponCode: ExplicitAnyType;\n  iframeContainerId: ExplicitAnyType;\n  integrationType: ExplicitAnyType;\n  consumerSalutation: ExplicitAnyType;\n  consumerFirstName: ExplicitAnyType;\n  consumerLastName: ExplicitAnyType;\n  consumerEmail: ExplicitAnyType;\n  consumerEmailHash: ExplicitAnyType;\n  consumerYearOfBirth: ExplicitAnyType;\n  consumerDateOfBirth: ExplicitAnyType;\n  consumerStreet: ExplicitAnyType;\n  consumerStreetNumber: ExplicitAnyType;\n  consumerFullStreet: ExplicitAnyType;\n  consumerZipcode: ExplicitAnyType;\n  consumerCity: ExplicitAnyType;\n  consumerCountry: ExplicitAnyType;\n  consumerLanguage: ExplicitAnyType;\n  consumerPhone: ExplicitAnyType;\n  gtmOnSuccess: () => void;\n  gtmOnFailure: () => void;\n};\n\ndeclare const require: <FNType>(name: string) => FNType;\n\n// Initialize GoogleTagManager APIs\nconst setInWindow = require<\n  (variableName: string, value: ExplicitAnyType) => void\n>(\"setInWindow\");\nconst injectScript = require<\n  (\n    scriptUrl: string,\n    onSuccess: () => void,\n    onFail: () => void,\n    cacheVersionKey: string,\n  ) => void\n>(\"injectScript\");\nconst log = require<(...messages: ExplicitAnyType[]) => void>(\"logToConsole\");\nconst queryPermission = require<\n  (permissionName: string, ...functionParams: ExplicitAnyType[]) => boolean\n>(\"queryPermission\");\nconst createQueue = require<\n  (valueKey: string) => (value: ExplicitAnyType) => void\n>(\"createQueue\");\nconst getCookieValues = require<\n  (cookieName: string) => [string]\n>(\"getCookieValues\");\nconst _setCookie = require<\n  (cookieKey: string, value: ExplicitAnyType, options: CookieSetOptions) => void\n>(\"setCookie\");\nconst sendPixel = require<\n  (pixelURL: string, onSuccess: () => void, onFail: () => void) => void\n>(\"sendPixel\");\nconst getUrl = require<() => string>(\"getUrl\");\nconst parseUrl = require<\n  (url: string) => {\n    searchParams: CookieStorageObject;\n  }\n>(\"parseUrl\");\nconst makeString = require<(value: ExplicitAnyType) => string>(\"makeString\");\nconst makeNumber = require<(value: ExplicitAnyType) => number>(\"makeNumber\");\nconst Undefined = null as unknown as undefined;\n\nconst sovendusDomains = {\n  optimize: \"https://www.sovopt.com/\",\n  voucherNetwork: \"https://api.sovendus.com/\",\n  checkoutProducts: \"https://press-order-api.sovendus.com/\",\n};\n\n/**\n * Main function\n */\nfunction main(): void {\n  if (checkPermissions()) {\n    if (data.pageType === \"page\") {\n      landingPage();\n    } else {\n      thankYouPage();\n    }\n    log(\"Sovendus Tag - end\");\n    data.gtmOnSuccess();\n  } else {\n    log(\n      \"Sovendus Tag - No permission to get/set sovReqCookie or read url path\",\n    );\n    data.gtmOnFailure();\n  }\n}\n\nconst cookieKeys = {\n  sovCouponCode: \"sovCouponCode\",\n  sovReqToken: \"sovReqToken\",\n  sovReqProductId: \"sovReqProductId\",\n} satisfies {\n  [key in InterfaceDataElementKeyType]?: InterfaceDataElementKeyType;\n};\n\n/**\n * Permission check\n * Make sure all permissions are checked\n */\nexport function checkPermissions(): boolean {\n  return (\n    queryPermission(\n      \"set_cookies\",\n      cookieKeys.sovReqToken,\n      getCookieOptions(\"add\"),\n    ) &&\n    queryPermission(\n      \"set_cookies\",\n      cookieKeys.sovCouponCode,\n      getCookieOptions(\"add\"),\n    ) &&\n    queryPermission(\n      \"set_cookies\",\n      cookieKeys.sovReqProductId,\n      getCookieOptions(\"add\"),\n    ) &&\n    queryPermission(\n      \"set_cookies\",\n      cookieKeys.sovReqToken,\n      getCookieOptions(\"delete\"),\n    ) &&\n    queryPermission(\n      \"set_cookies\",\n      cookieKeys.sovCouponCode,\n      getCookieOptions(\"delete\"),\n    ) &&\n    queryPermission(\n      \"set_cookies\",\n      cookieKeys.sovReqProductId,\n      getCookieOptions(\"delete\"),\n    ) &&\n    queryPermission(\"get_cookies\", cookieKeys.sovReqToken) &&\n    queryPermission(\"get_cookies\", cookieKeys.sovCouponCode) &&\n    queryPermission(\"get_cookies\", cookieKeys.sovReqProductId) &&\n    queryPermission(\"get_url\", \"query\", cookieKeys.sovReqToken) &&\n    queryPermission(\"get_url\", \"query\", cookieKeys.sovCouponCode) &&\n    queryPermission(\"get_url\", \"query\", cookieKeys.sovReqProductId) &&\n    queryPermission(\"inject_script\", sovendusDomains.optimize) &&\n    queryPermission(\"inject_script\", sovendusDomains.voucherNetwork) &&\n    queryPermission(\"send_pixel\", sovendusDomains.checkoutProducts)\n  );\n}\n\nfunction logger(\n  pageType: \"Page\" | \"Thankyou\",\n  message: string,\n  messages?: ExplicitAnyType[],\n): void {\n  log(\"Sovendus Tag [\" + pageType + \"] - \" + message, messages || \"\");\n}\n\n/**\n * landing page related functions\n *\n */\n\nfunction landingPage(): void {\n  logger(\"Page\", \"starting...\");\n\n  const sovPageStatus = setLandingPageInitialStatus();\n  const config = getLandingPageConfig(sovPageStatus);\n  const urlSearchParams = getUrlObject();\n\n  optimizePage(config, sovPageStatus);\n  checkoutProductsPage(config, sovPageStatus, urlSearchParams);\n  voucherNetworkPage(config, sovPageStatus, urlSearchParams);\n\n  setInWindow(\"sovPageStatus\", sovPageStatus);\n  logger(\"Page\", \"done\");\n}\n\nfunction getLandingPageConfig(\n  sovPageStatus: SovPageStatus,\n): SovendusPageConfig {\n  const sovPageConfig: SovendusPageConfig = {\n    settings: {\n      voucherNetwork: {\n        cookieTracking: data.voucherNetworkPage || false,\n      },\n      optimize: {\n        useGlobalId: true,\n        globalId: data.optimizeIdPage\n          ? makeString(data.optimizeIdPage)\n          : Undefined,\n        globalEnabled: !!(data.optimizeIdPage && data.optimizeIdPage),\n      },\n      checkoutProducts: data.checkoutProductsPage || false,\n      version: \"2\" as Versions.TWO,\n    },\n    integrationType: PLUGIN_VERSION,\n  };\n  setInWindow(\"sovPageConfig\", sovPageConfig);\n  sovPageStatus.sovPageConfigFound = true;\n  return sovPageConfig;\n}\n\nfunction setLandingPageInitialStatus(): SovPageStatus {\n  const sovPageStatus: SovPageStatus = {\n    loadedOptimize: false,\n    loadedVoucherNetworkSwitzerland: false,\n    loadedVoucherNetworkVoucherCode: false,\n    executedCheckoutProducts: false,\n    missingSovReqTokenOrProductId: false,\n    sovPageConfigFound: false,\n  };\n  setInWindow(\"sovPageStatus\", sovPageStatus);\n  return sovPageStatus;\n}\n\nfunction optimizePage(\n  config: SovendusPageConfig,\n  sovPageStatus: SovPageStatus,\n): void {\n  if (\n    config.settings.optimize.globalId &&\n    config.settings.optimize.globalEnabled\n  ) {\n    const sovendusUrl =\n      sovendusDomains.optimize + config.settings.optimize.globalId;\n    injectScript(\n      sovendusUrl,\n      () => {\n        /* empty */\n      },\n      data.gtmOnFailure,\n      \"use-cache\",\n    );\n\n    logger(\"Page\", \"success optimizeId =\", [config.settings.optimize.globalId]);\n    sovPageStatus.loadedOptimize = true;\n  }\n}\n\nfunction voucherNetworkPage(\n  config: SovendusPageConfig,\n  sovPageStatus: SovPageStatus,\n  urlSearchParams: CookieStorageObject,\n): void {\n  if (config.settings.voucherNetwork.cookieTracking) {\n    const sovCouponCode = urlSearchParams[cookieKeys.sovCouponCode];\n    if (sovCouponCode) {\n      setCookie(cookieKeys.sovCouponCode, \"add\", sovCouponCode);\n      logger(\"Page\", \"success sovCouponCode =\", [sovCouponCode]);\n      sovPageStatus.loadedVoucherNetworkVoucherCode = true;\n    }\n    sovPageStatus.loadedVoucherNetworkSwitzerland = true;\n    const sovLandingScript = sovendusDomains.voucherNetwork + \"js/landing.js\";\n    injectScript(\n      sovLandingScript,\n      () => {\n        /* empty */\n      },\n      data.gtmOnFailure,\n      \"use-chache\",\n    );\n  }\n}\n\nfunction checkoutProductsPage(\n  config: SovendusPageConfig,\n  sovPageStatus: SovPageStatus,\n  urlSearchParams: CookieStorageObject,\n): void {\n  if (config.settings.checkoutProducts) {\n    const sovReqToken = urlSearchParams[cookieKeys.sovReqToken];\n    const sovReqProductId = urlSearchParams[cookieKeys.sovReqProductId];\n    if (sovReqToken || sovReqProductId) {\n      if (!sovReqToken || !sovReqProductId) {\n        logger(\"Page\", \"sovReqToken or sovReqProductId is missing in url\");\n        sovPageStatus.missingSovReqTokenOrProductId = true;\n      } else {\n        setCookie(cookieKeys.sovReqToken, \"add\", sovReqToken);\n        setCookie(cookieKeys.sovReqProductId, \"add\", sovReqProductId);\n        logger(\n          \"Page\",\n          \"success sovReqToken =\" +\n            sovReqToken +\n            \" - sovReqProductId =\" +\n            sovReqProductId,\n        );\n        sovPageStatus.executedCheckoutProducts = true;\n      }\n    }\n  }\n}\n\nfunction getUrlObject(): CookieStorageObject {\n  const urlObject = parseUrl(getUrl());\n  return urlObject.searchParams;\n}\n\n/**\n * Thank you page related functions\n *\n */\n\nfunction thankYouPage(): void {\n  logger(\"Thankyou\", \"starting...\");\n\n  const thankYouConfig = getThankyouPageConfig();\n  const sovThankyouStatus = setThankyouPageInitialStatus();\n\n  voucherNetworkThankYouPage(thankYouConfig, sovThankyouStatus);\n\n  if (thankYouConfig.settings.optimize.globalEnabled) {\n    const sovendusUrl =\n      sovendusDomains.optimize +\n      thankYouConfig.settings.optimize.globalId +\n      \"/conversion/?ordervalue=\" +\n      thankYouConfig.orderValue +\n      \"&ordernumber=\" +\n      thankYouConfig.orderId +\n      \"&vouchercode=\" +\n      thankYouConfig.usedCouponCode +\n      \"&email=\" +\n      thankYouConfig.consumerEmail +\n      \"&subtext=XXX\";\n    injectScript(\n      sovendusUrl,\n      () => {\n        /* empty */\n      },\n      data.gtmOnFailure,\n      \"use-cache\",\n    );\n    logger(\"Thankyou\", \"success optimizeId =\", [\n      thankYouConfig.settings.optimize.globalId,\n    ]);\n    sovThankyouStatus.loadedOptimize = true;\n  }\n\n  if (thankYouConfig.settings.checkoutProducts) {\n    setCookie(\"sovReqToken\", \"add\", \"test\");\n    setCookie(\"sovReqProductId\", \"add\", \"123\");\n\n    const sovReqToken = getCookieValues(\"sovReqToken\")[0];\n    const sovReqProductId = getCookieValues(\"sovReqProductId\")[0];\n    const pixelUrl =\n      sovendusDomains.voucherNetwork +\n      \"ext/\" +\n      sovReqProductId +\n      \"/image?sovReqToken=\" +\n      sovReqToken;\n\n    // Remove Checkout Products Cookie\n    // setSetCookie(\"sovReqToken\", \"delete\");\n    // setSetCookie(\"sovReqProductId\", \"delete\");\n\n    // Send Checkout Products pixel\n    sendPixel(\n      pixelUrl,\n      () => {\n        /* empty */\n      },\n      data.gtmOnFailure,\n    );\n    logger(\n      \"Thankyou\",\n      \"success sovReqToken =\" +\n        sovReqToken +\n        \" - sovReqProductId =\" +\n        sovReqProductId,\n    );\n    sovThankyouStatus.executedCheckoutProducts = true;\n  }\n\n  setInWindow(\"sovThankyouStatus\", sovThankyouStatus);\n  logger(\"Thankyou\", \"done\");\n}\n\nfunction getCookieOptions(setType: \"add\" | \"delete\"): CookieSetOptions {\n  return {\n    \"path\": \"/\",\n    \"max-age\": setType === \"add\" ? 60 * 60 * 24 * 31 : 0,\n    \"secure\": true,\n  };\n}\n\nfunction setCookie(\n  cookieName: string,\n  setType: \"add\" | \"delete\",\n  cookieValue?: string,\n): void {\n  _setCookie(cookieName, cookieValue, getCookieOptions(setType));\n}\n\nfunction voucherNetworkThankYouPage(\n  thankYouConfig: SovendusThankYouPageConfig,\n  sovThankyouStatus: SovendusThankYouPageStatus,\n): void {\n  if (thankYouConfig.settings.voucherNetwork.anyCountryEnabled) {\n    const sovendusUrl =\n      sovendusDomains.checkoutProducts + \"sovabo/common/js/flexibleIframe.js\";\n\n    const sovIframes = createQueue(\"sovIframes\");\n\n    //Allocate Main- & Orderdata\n    sovIframes({\n      trafficSourceNumber: makeString(\n        thankYouConfig.settings.voucherNetwork.simple!.trafficSourceNumber,\n      ),\n      trafficMediumNumber: makeString(\n        thankYouConfig.settings.voucherNetwork.simple!.trafficMediumNumber,\n      ),\n      orderId: thankYouConfig.orderId,\n      orderValue: thankYouConfig.orderValue,\n      orderCurrency: thankYouConfig.orderCurrency,\n      usedCouponCode: thankYouConfig.usedCouponCode,\n      iframeContainerId:\n        thankYouConfig.settings.voucherNetwork.iframeContainerId!,\n      integrationType: PLUGIN_VERSION,\n    } satisfies SovConversionsType);\n\n    //Allocate Consumer Data\n    setInWindow(\"sovConsumer\", {\n      consumerSalutation: thankYouConfig.consumerSalutation,\n      consumerFirstName: thankYouConfig.consumerFirstName,\n      consumerLastName: thankYouConfig.consumerLastName,\n      consumerEmail: thankYouConfig.consumerEmail,\n      consumerEmailHash: thankYouConfig.consumerEmailHash,\n      consumerStreet: thankYouConfig.consumerStreet,\n      consumerStreetNumber: thankYouConfig.consumerStreetNumber,\n      consumerCountry: thankYouConfig.consumerCountry,\n      consumerZipcode: thankYouConfig.consumerZipcode,\n      consumerCity: thankYouConfig.consumerCity,\n      consumerPhone: thankYouConfig.consumerPhone,\n      consumerYearOfBirth: thankYouConfig.consumerYearOfBirth,\n    } satisfies SovConsumerType);\n\n    //Inject flexibleIframe Script in page.\n    injectScript(\n      sovendusUrl,\n      () => {\n        /* empty */\n      },\n      data.gtmOnFailure,\n      \"use-cache\",\n    );\n    logger(\"Thankyou\", \"success voucher network\");\n    sovThankyouStatus.loadedVoucherNetwork = true;\n  }\n}\n\nfunction getThankyouPageConfig(): SovendusThankYouPageConfig {\n  const streetInfo = getStreetAndNumber(\n    data.consumerFullStreet,\n    data.consumerStreet,\n    data.consumerStreetNumber,\n  );\n\n  const sovThankyouConfig: SovendusThankYouPageConfig = {\n    settings: {\n      voucherNetwork: {\n        anyCountryEnabled: !!(\n          data.trafficSourceNumber && data.trafficMediumNumber\n        ),\n        simple: {\n          trafficSourceNumber: makeString(data.trafficSourceNumber),\n          trafficMediumNumber: makeString(data.trafficMediumNumber),\n        },\n        iframeContainerId: makeString(data.iframeContainerId),\n      },\n      optimize: {\n        useGlobalId: true,\n        globalId: data.optimizeId ? makeString(data.optimizeId) : Undefined,\n        globalEnabled: data.optimizeId ? true : false,\n      },\n      checkoutProducts: data.checkoutProducts || false,\n      version: \"2\" as Versions.TWO,\n    },\n    orderId: makeString(data.orderId),\n    orderValue: calculateOrderValue(\n      data.netOrderValue,\n      data.grossOrderValue,\n      data.taxValue,\n      data.shippingValue,\n    ),\n    orderCurrency: data.orderCurrency\n      ? makeString(data.orderCurrency)\n      : Undefined,\n    usedCouponCode: data.usedCouponCode\n      ? makeString(data.usedCouponCode)\n      : Undefined,\n    iframeContainerId: makeString(data.iframeContainerId),\n    integrationType: PLUGIN_VERSION,\n    consumerSalutation: (data.consumerSalutation\n      ? makeString(data.consumerSalutation)\n      : Undefined) as \"Mr.\" | \"Mrs.\" | undefined,\n    consumerFirstName: data.consumerFirstName\n      ? makeString(data.consumerFirstName)\n      : Undefined,\n    consumerLastName: data.consumerLastName\n      ? makeString(data.consumerLastName)\n      : Undefined,\n    consumerEmail: data.consumerEmail\n      ? makeString(data.consumerEmail)\n      : Undefined,\n    consumerEmailHash: data.consumerEmailHash\n      ? makeString(data.consumerEmailHash)\n      : Undefined,\n    consumerYearOfBirth: data.consumerYearOfBirth\n      ? makeString(data.consumerYearOfBirth)\n      : Undefined,\n    consumerDateOfBirth: data.consumerDateOfBirth\n      ? makeString(data.consumerDateOfBirth)\n      : Undefined,\n    consumerStreet: streetInfo.street,\n    consumerStreetNumber: streetInfo.number,\n    consumerZipcode: data.consumerZipcode\n      ? makeString(data.consumerZipcode)\n      : Undefined,\n    consumerCity: data.consumerCity ? makeString(data.consumerCity) : Undefined,\n    consumerCountry: data.consumerCountry\n      ? makeString(data.consumerCountry)\n      : Undefined,\n    consumerPhone: data.consumerPhone\n      ? makeString(data.consumerPhone)\n      : Undefined,\n    usedCouponCodes: Undefined,\n    sessionId: Undefined,\n    timestamp: Undefined,\n  };\n  setInWindow(\"sovThankyouConfig\", sovThankyouConfig);\n  // TODO: remove\n  logger(\"Thankyou\", \"sovThankyouConfig =\", [sovThankyouConfig]);\n  logger(\"Thankyou\", \"data =\", [data]);\n  return sovThankyouConfig;\n}\n\nfunction calculateOrderValue(\n  netOrderValue: ExplicitAnyType,\n  grossOrderValue: ExplicitAnyType,\n  taxValue: ExplicitAnyType,\n  shippingValue: ExplicitAnyType,\n): string {\n  if (netOrderValue) {\n    return makeString(netOrderValue);\n  }\n  let _grossOrderValue = makeNumber(makeString(grossOrderValue));\n  let _taxValue = makeNumber(makeString(taxValue));\n  let _shippingValue = makeNumber(makeString(shippingValue));\n  _grossOrderValue = _grossOrderValue ? _grossOrderValue : 0;\n  _taxValue = _taxValue ? _taxValue : 0;\n  _shippingValue = _shippingValue ? _shippingValue : 0;\n  return makeString(_grossOrderValue - _taxValue - _shippingValue);\n}\n\nfunction setThankyouPageInitialStatus(): SovendusThankYouPageStatus {\n  const sovThankyouStatus: SovendusThankYouPageStatus = {\n    loadedOptimize: false,\n    loadedVoucherNetwork: false,\n    executedCheckoutProducts: false,\n    sovThankyouConfigFound: false,\n    countryCodePassedOnByPlugin: false,\n  };\n  setInWindow(\"sovThankyouStatus\", sovThankyouStatus);\n  return sovThankyouStatus;\n}\n\nfunction getStreetAndNumber(\n  streetWithNumber?: ExplicitAnyType,\n  streetName?: ExplicitAnyType,\n  streetNumber?: ExplicitAnyType,\n): {\n  street: string;\n  number: string;\n} {\n  if (!streetWithNumber) {\n    return {\n      street: makeString(streetName) || \"\",\n      number: makeString(streetNumber) || \"\",\n    };\n  }\n  const streetInfo = splitStreetAndNumber(makeString(streetWithNumber));\n  return {\n    street: streetInfo.streetName,\n    number: streetInfo.number,\n  };\n}\n\nfunction splitStreetAndNumber(street: string): {\n  streetName: string;\n  number: string;\n} {\n  // Check if the input is valid (must be a non-empty string)\n  if (typeof street !== \"string\" || street.trim().length === 0) {\n    return { streetName: street, number: \"\" };\n  }\n\n  // Trim leading and trailing spaces from the street string\n  const trimmedStreet = street.trim();\n\n  // Find the index of the last space in the string\n  const lastSpaceIndex = trimmedStreet.lastIndexOf(\" \");\n\n  // If no space is found, there is no house number\n  if (lastSpaceIndex === -1) {\n    return { streetName: trimmedStreet, number: \"\" };\n  }\n\n  // Extract the potential house number (everything after the last space)\n  const potentialNumber = trimmedStreet.slice(lastSpaceIndex + 1);\n\n  // Check if the potential house number is valid\n  if (isValidHouseNumber(potentialNumber)) {\n    // If valid, return the street (everything before the last space) and the house number\n    return {\n      streetName: trimmedStreet.slice(0, lastSpaceIndex),\n      number: potentialNumber,\n    };\n  }\n\n  // If the house number is invalid, return the entire string as the street\n  return { streetName: trimmedStreet, number: \"\" };\n}\n\n// Helper function to check if a string is a valid house number\nfunction isValidHouseNumber(str: string): boolean {\n  // If the string is empty, it's not a valid house number\n  if (str.length === 0) {\n    return false;\n  }\n\n  // Iterate through each character in the string\n  for (let i = 0; i < str.length; i++) {\n    const char = str[i]!;\n    const charCode = char.charCodeAt(0);\n\n    // Check if the character is a digit (0-9)\n    if (charCode >= 48 && charCode <= 57) {\n      continue; // Character is a digit, continue to the next character\n    }\n\n    // Check if the character is a letter (A-Z or a-z) and it's the last character\n    if (\n      i === str.length - 1 &&\n      ((charCode >= 65 && charCode <= 90) || // A-Z\n        (charCode >= 97 && charCode <= 122)) // a-z\n    ) {\n      continue; // Last character is a letter, continue\n    }\n\n    // If the character is neither a digit nor a letter at the end, it's invalid\n    return false;\n  }\n\n  // If all characters are valid, return true\n  return true;\n}\n\nmain();\n"],"names":[],"mappings":"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"}